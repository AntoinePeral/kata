ðŸš€ Ã‰tapes pour lancer les tests Jest + TypeScript
1. Initialiser ton projet
Si ce nâ€™est pas dÃ©jÃ  fait :


npm init -y
2. Installer les dÃ©pendances nÃ©cessaires

npm install --save-dev jest ts-jest typescript @types/jest
jest â†’ le framework de test.

ts-jest â†’ pour que Jest comprenne TypeScript.

@types/jest â†’ pour lâ€™autocomplÃ©tion et les types.

typescript â†’ bah, Ã©videmment ðŸ˜„.

3. Configurer TypeScript
CrÃ©e un fichier tsconfig.json si tâ€™en as pas encore :

tsc --init

json
Copier
Modifier
{
  "compilerOptions": {
    "target": "esnext",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "outDir": "dist"
  },
  "include": ["src", "tests"] --> ne mettre les test seulement si on veut les utiliser pour le outDir
}

4. Configurer Jest avec TypeScript
Lance :


npx ts-jest config:init
Ã‡a va crÃ©er un fichier jest.config.js avec une config de base comme :

js
Copier
Modifier
/** @type {import('ts-jest').JestConfigWithTsJest} */
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  testMatch: ['**/?(*.)+(spec|test).[tj]s?(x)'],
};
5. CrÃ©er tes fichiers
src/sum.ts

ts
Copier
Modifier
export function sum(a: number, b: number): number {
  return a + b;
}
tests/sum.test.ts

ts
Copier
Modifier
import { sum } from '../src/sum';

test('adds 1 + 2 to equal 3', () => {
  expect(sum(1, 2)).toBe(3);
});
6. Lancer les tests
Dans ton terminal (dans VSCode) :


npx jest
ou


npm test
(si tâ€™as un script "test": "jest" dans ton package.json)

7. Activer lâ€™extension Jest (optionnel mais stylÃ©)
Installe lâ€™extension VSCode "Jest" (de Orta) pour :

Voir les rÃ©sultats des tests en direct dans lâ€™Ã©diteur.

Lancer les tests en un clic.

---------------------


ðŸ‘‰ Si tu installes un outil en dev avec npm,
tu peux le lancer sans problÃ¨me via npx ou via un script.

ðŸ”§ Exemple avec jest :

npm install --save-dev jest
Ã‡a lâ€™installe dans :


./node_modules/jest
Et crÃ©e aussi un lien exÃ©cutable dans :


./node_modules/.bin/jest
âœ… 2 faÃ§ons de le lancer :
âœ… Option 1 â€” avec npx :

npx jest
âž¡ï¸ npx va chercher jest dans node_modules/.bin et le lance pour toi.

âœ… Option 2 â€” via un script npm :
Dans ton package.json :

json
Copier
Modifier
"scripts": {
  "test": "jest"
}
Et ensuite :


npm test
ðŸš« Tu nâ€™as pas besoin de lâ€™installer globalement (npm install -g jest)
car Jest est dispo localement dans ton projet, et npx le trouve direct. ðŸ’ª

âœ… En rÃ©sumÃ© :
Commande	Ce quâ€™elle fait
npm install --save-dev	Installe le paquet en local (dev)
npx jest	Lance jest sans lâ€™installer globalement
npm test	Lance le script "test" du package.json


--------------


ðŸ§¾ Quâ€™est-ce que tsc ?
tsc = TypeScript Compiler

Câ€™est lâ€™outil qui prend tes fichiers .ts (TypeScript) et les compile en fichiers .js (JavaScript), que Node.js ou un navigateur peuvent exÃ©cuter.

ðŸ§ª Et npx tsc, câ€™est quoi ?
npx est un outil livrÃ© avec npm, qui permet dâ€™exÃ©cuter des binaires locaux du projet (ou temporaires sâ€™ils ne sont pas installÃ©s).

tsc est le binaire de compilation TypeScript.

Donc :

bash
Copier
Modifier
npx tsc
â–¶ï¸ lance le compilateur TypeScript mÃªme si tu nâ€™as pas installÃ© TypeScript globalement.

ðŸ§± Que fait npx tsc exactement ?
Il va :

Lire ton fichier tsconfig.json

Trouver tous les fichiers .ts dans les dossiers dÃ©finis par "include" (ex: "include": ["src"])

Appliquer les options (rootDir, outDir, target, etc.)

Compiler les fichiers .ts âžœ .js

Placer les fichiers .js dans le dossier dÃ©fini par "outDir" (ex: src/dist/)

ðŸ” Exemple pratique
Dossier src/findIntruder.ts :
ts
Copier
Modifier
export default function findIntruder(numbers: number[]) {
  const even = numbers.filter(n => n % 2 === 0);
  const odd = numbers.filter(n => n % 2 !== 0);
  if (even.length === 1) return even[0];
  if (odd.length === 1) return odd[0];
  throw new Error('Aucun intrus trouvÃ©');
}
Dans tsconfig.json :
json
Copier
Modifier
{
  "compilerOptions": {
    "rootDir": "src",
    "outDir": "src/dist"
  },
  "include": ["src"]
}
Commande :
bash
Copier
Modifier
npx tsc
RÃ©sultat :
css
Copier
Modifier
src/
â”œâ”€â”€ findIntruder.ts
â”œâ”€â”€ dist/
â”‚   â””â”€â”€ findIntruder.js âœ…